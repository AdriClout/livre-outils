<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr_CA" xml:lang="fr_CA"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Chaire de leadership en enseignement des sciences sociales numériques (CLESSN)">
<title>Outils de recherche en sciences sociales numériques - 6&nbsp; Une image vaut mille mots</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapitre_7.html" rel="next">
<link href="./chapitre_5.html" rel="prev">
<link href="./images/logo_CLESSN_inverse.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapitre_6.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Une image vaut mille mots</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Outils de recherche en sciences sociales numériques</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/clessn/livre-outils" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avant-propos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Le monde du libre</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R ou ne pas R?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">À la quête de l’optimisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Gestion de la littérature</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Les outils de collecte de données</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Une image vaut mille mots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Baliser les sciences sociales&nbsp;: langages et pratiques</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Outils d’intelligence artificielle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Kit de démarrage pour les sciences sociales numériques</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./annexe_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">L’informatique</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./annexe_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Installation de Biblatex et configuration de Zotero</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">6.1</span> Introduction</a></li>
  <li>
<a href="#r%C3%A9flexion-th%C3%A9orique" id="toc-réflexion-théorique" class="nav-link" data-scroll-target="#r%C3%A9flexion-th%C3%A9orique"><span class="header-section-number">6.2</span> Réflexion théorique</a>
  <ul class="collapse">
<li><a href="#les-options-disponibles" id="toc-les-options-disponibles" class="nav-link" data-scroll-target="#les-options-disponibles"><span class="header-section-number">6.2.1</span> Les options disponibles</a></li>
  </ul>
</li>
  <li>
<a href="#r%C3%A9flexion-m%C3%A9thodologique" id="toc-réflexion-méthodologique" class="nav-link" data-scroll-target="#r%C3%A9flexion-m%C3%A9thodologique"><span class="header-section-number">6.3</span> Réflexion méthodologique</a>
  <ul class="collapse">
<li><a href="#comment-utiliser-ggplot2" id="toc-comment-utiliser-ggplot2" class="nav-link" data-scroll-target="#comment-utiliser-ggplot2"><span class="header-section-number">6.3.1</span> Comment utiliser ggplot2</a></li>
  <li><a href="#exemples-et-fonctionnalit%C3%A9s" id="toc-exemples-et-fonctionnalités" class="nav-link" data-scroll-target="#exemples-et-fonctionnalit%C3%A9s"><span class="header-section-number">6.3.2</span> Exemples et fonctionnalités</a></li>
  </ul>
</li>
  <li><a href="#trucs-et-astuces" id="toc-trucs-et-astuces" class="nav-link" data-scroll-target="#trucs-et-astuces"><span class="header-section-number">6.4</span> Trucs et astuces</a></li>
  <li><a href="#pour-aller-plus-loin" id="toc-pour-aller-plus-loin" class="nav-link" data-scroll-target="#pour-aller-plus-loin"><span class="header-section-number">6.5</span> Pour aller plus loin</a></li>
  <li><a href="#r%C3%A9f%C3%A9rences" id="toc-références" class="nav-link" data-scroll-target="#r%C3%A9f%C3%A9rences"><span class="header-section-number">6.6</span> Références</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/clessn/livre-outils/edit/main/chapitre_6.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/clessn/livre-outils/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Une image vaut mille mots</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>Camille Tremblay-Antoine<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Nadjim Fréchet<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<section id="introduction" class="level2" data-number="6.1"><h2 data-number="6.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">6.1</span> Introduction</h2>
<p>Une fois les données collectées, nettoyées, traitées et analysées, une partie centrale du travail d’un scientifique de données est de faire parler les résultats de ses tests empiriques. Il s’agit alors de trouver la meilleure manière de rendre l’information digeste pour les experts et initiés de votre discipline académique ou pour le grand public. La visualisation graphique des données est donc centrale afin de vulgariser les résultats d’une recherche empirique.</p>
<p>L’objectif de ce chapitre est d’apprendre aux codeurs débutants les rudiments de la visualisation graphique en R. Ce chapitre présentera plus particulièrement les packages R <em>ggplot2</em> et <em>dplyr</em> eux-mêmes téléchargeable à partir du package <em>tidyverse</em>. Si <em>dplyr</em> permet de préparer les données avant leur visualisation, <em>ggplot2</em> est un package dédié à la production de graphiques. Ce chapitre présente sa grammaire avec une série d’exemples <span class="citation" data-cites="wickham09 wickham_etal23">(<a href="references.html#ref-wickham09" role="doc-biblioref"><strong>wickham09?</strong></a>; <a href="references.html#ref-wickham_etal23" role="doc-biblioref"><strong>wickham_etal23?</strong></a>)</span>.</p>
<p>Ce chapitre est plus technique que théorique et permet aux codeurs débutants d’en apprendre davantage sur la manière de construire des graphiques en R avec des données concrètes. La question centrale qui devrait vous guider lorsque vous créez des visualisations est la suivante: <strong>Comment opimiser l’intelligibilité des données?</strong> L’objectif d’un graphique n’est pas seulement d’illustrer les données. Un bon graphique devrait permettre de vulgariser une information ou de mettre en saillance un aspect particulier des données. L’objectif communicationnel devrait toujours être gardé en tête. Les graphiques en exemple dans ce chapitre sont construits avec les données de l’Étude Électorale Canadienne de 2019 qui sont facilement téléchargeables sur leur site.</p>
<p>La première section de ce chapitre expose les options et packages également disponibles pour la construction de graphiques en R. La deuxième section de ce chapitre compare les avantages et inconvénients de l’utilisation de <em>ggplot2</em> par rapport aux autres packages de visualisation de données qui auront été présentés. La troisième section de ce chapitre montre des exemples de graphiques construits avec la grammaire de <em>ggplot2</em> en utilisant les données de l’Étude électorale canadienne de 2019. Les codes employés pour produire les graphiques en exemple sont disponibles dans l’annexe de ce livre. Ces codes reproductibles permettront aux codeurs débutants d’adapter ces derniers pour leurs propres projets.</p>
</section><section id="réflexion-théorique" class="level2" data-number="6.2"><h2 data-number="6.2" class="anchored" data-anchor-id="réflexion-théorique">
<span class="header-section-number">6.2</span> Réflexion théorique</h2>
<section id="les-options-disponibles" class="level3" data-number="6.2.1"><h3 data-number="6.2.1" class="anchored" data-anchor-id="les-options-disponibles">
<span class="header-section-number">6.2.1</span> Les options disponibles</h3>
<p>De nombreux <em>packages</em> ont été développés dans le langage R dans le but de visualiser des données graphiquement, il devient donc facile de s’y perdre. Heureusement, les options qui s’offrent à nous se précisent lorsque l’on s’intéresse à ce qui est le plus utilisé dans la communauté des codeurs de ce langage de programmation. Les <em>packages</em> les plus utilisés représentent des outils qui ont été substantiellement validés et améliorés par leurs développeurs, mais aussi par une importante communauté de codeurs en ligne et de chercheurs universitaires. Trois de ces options sont présentées dans ce chapitre: les graphiques du <em>Base R</em>, le <em>package</em> <em>Lattice</em> et le <em>package</em> <em>ggplot2</em>. Les avantages et inconvénients respectifs de ces trois approches pour la création de graphiques sont explicités dans les sections suivantes. <!--# Je crois qu'il serait pertinent d'expliquer brièvement ce qu'est un package (ce n'est pas expliqué dans les chapitres précédents je crois)--></p>
<section id="avantages-et-inconvénients-de-base-r" class="level4" data-number="6.2.1.1"><h4 data-number="6.2.1.1" class="anchored" data-anchor-id="avantages-et-inconvénients-de-base-r">
<span class="header-section-number">6.2.1.1</span> Avantages et inconvénients de Base R</h4>
<p>Le <em>Base R</em> est le langage de base de R et il permet de faire de nombreuses manipulations statistiques sans avoir à installer de <em>packages</em> au préalable. Le <em>Base R</em> permet notamment de produire des graphiques rapidement. Cela peut être utile pour visualiser la distribution d’une variable ou pour regarder la relation entre deux d’entre elles, par exemple. Pour produire un graphique avec le langage de base R, il suffit de faire appel à la fonction <em>plot()</em>. Avec la fonction <em>plot()</em>, le codeur peut visualiser la distribution d’une variable seule en spécifiant l’axe des <em>x</em> dans cette dernière. Le codeur peut également visualiser la relation entre deux variables en spécifiant à l’intérieur de la fonction celles qui composeront les axes des <em>x</em> et des <em>y</em> du graphique. Les fonctions <em>barplot(), hist()</em> ou <em>boxplot()</em> disponibles dans le <em>Base R</em> permettent de spécifier le style de graphique souhaité, qu’on veuille représenter nos données sous forme de diagramme à barre, d’histogramme ou de diagramme en boîtes <span class="citation" data-cites="kabacoff22">(<a href="references.html#ref-kabacoff22" role="doc-biblioref"><strong>kabacoff22?</strong></a>)</span>.</p>
<!--

Ce chapitre est plus technique que théorique et permet aux codeurs débutants d'en apprendre davantage sur la manière de construire des graphiques en R avec des données concrètes. Cependant, la question centrale qui devrait vous guider lorsque vous créez des visualisations est la suivante: **Comment opimiser l'intelligibilité des données?** L'objectif d'un graphique n'est pas seulement d'illustrer les données. Un bon graphique devrait permettre de vulgariser une information ou de mettre en saillance un aspect particulier des données. L'objectif communicationnel devrait toujours être gardé en tête. Les graphiques en exemple dans ce chapitre sont construits avec les données de l'Étude électorale canadienne de 2015 qui sont facilement téléchargeables sur leur site\footnote{https://ces-eec.arts.ubc.ca/english-section/home/}. La première section de ce chapitre expose les options et packages également disponibles pour la construction de graphique en R. La deuxième section de ce chapitre compare les avantages et inconvénients de l'utilisation de *ggplot2* par rapport aux autres packages de visualisation de données disponibles. La troisième section de chapitre montre des exemples de graphique construit avec la grammaire de *ggplot2* et avec les données de l'Étude électorale canadienne de 2015. Cette section de ce chapitre présente également les codes utilisés pour produire les graphiques en exemple. Ces codes reproductibles permettront aux codeurs débutants d'adapter ces derniers pour leur propre projet.

-->
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Exemple de graphique avec la fonction barplot() du BaseR</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">y</span>,names.arg<span class="op">=</span><span class="va">x</span>,</span>
<span> main<span class="op">=</span><span class="st">"Figure 1 - Proportion (%) de répondants par province\n"</span>,</span>
<span> col <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span> sub<span class="op">=</span><span class="st">"\nSource: Étude Électorale Canadienne de 2019                                                "</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alors qu’un peu tout peut être fait avec le <em>Base R</em>, ce langage demeure élémentaire; il est difficile d’innover dans la visualisation ou même de produire des graphiques plus sophistiqués. Le <em>Base R</em> peut sembler plus simple pour l’exploration de données ou pour produire des graphiques de base rapidement, mais ce langage devient rapidement complexe lorsqu’on cherche à améliorer l’esthétique de son graphique ou à visualiser des relations entre plusieurs variables, ce que <em>lattice</em> et <em>ggplot2</em> permettent plus facilement<span class="citation" data-cites="wickham09">(<a href="references.html#ref-wickham09" role="doc-biblioref"><strong>wickham09?</strong></a>)</span>.</p>
</section><section id="avantages-et-inconvénients-de-lattice" class="level4" data-number="6.2.1.2"><h4 data-number="6.2.1.2" class="anchored" data-anchor-id="avantages-et-inconvénients-de-lattice">
<span class="header-section-number">6.2.1.2</span> Avantages et inconvénients de <em>lattice</em>
</h4>
<p>Développé par Deepayan Sarkar, <em>lattice</em> cherche à faciliter la visualisation de graphique en facettes. Plus précisément, ce <em>package</em> vise à améliorer les graphiques du <em>Base R</em> en fournissant de meilleures options de graphisme par défaut pour visualiser des relations multivariées. Ce <em>package</em> est donc intéressant pour les chercheurs et les codeurs voulant présenter graphiquement la relation entre plus de deux variables <span class="citation" data-cites="kabacoff22 sarkar08 sarkar23">(<a href="references.html#ref-kabacoff22" role="doc-biblioref"><strong>kabacoff22?</strong></a>; <a href="references.html#ref-sarkar08" role="doc-biblioref"><strong>sarkar08?</strong></a>; <a href="references.html#ref-sarkar23" role="doc-biblioref"><strong>sarkar23?</strong></a>)</span>. Pour produire un graphique de base avec <em>Lattice</em>, le <em>package lattice</em> doit préalablement être installé dans la bibliothèque de <em>packages</em> du codeur et chargé dans sa session au début de son code (voir annexe). Par la suite, le codeur doit spécifier le type de graphique souhaité avec la fonction appropriée<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Une fois la fonction choisie, il doit spécifier par une formule les variables x et y ainsi que la troisième variable à contrôler et à visualiser en facettes (<em>graph_type(formula | variable en facettes, data=)</em>).</p>
<p>Si la Figure 1 produite à partir du <em>Base R</em> nous permet de visualiser le pourcentage de répondants par province dans l’Étude Électorale Canadienne de 2019, le <em>package lattice</em> nous permet de visualiser facilement ce même pourcentage de répondants en tenant compte du positionnement idéologique des Canadiens par province sur l’échelle gauche-droite, comme l’illustre la Figure 2 (0 étant la gauche et 10 la droite).</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Exemple de graphique avec la fonction histogram() du package lattice</span></span>
<span></span>
<span><span class="fu">histogram</span><span class="op">(</span><span class="op">~</span><span class="va">gaucheDroite</span> <span class="op">|</span> <span class="va">province</span>, data <span class="op">=</span> <span class="va">GraphiqueLattice</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, </span>
<span>  by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>  main <span class="op">=</span> <span class="st">"Figure 2 - Distribution des Canadiens\n par province sur l'échelle gauche-droite\n"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"\nIdéologie gauche-droite"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Pourcentage (%)\n"</span>,</span>
<span>  col  <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>  sub<span class="op">=</span><span class="st">"\nSource: Étude Électorale Canadienne de 2019                                                "</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cependant, le <em>package lattice</em> a pour désavantage d’avoir un modèle formel (une grammaire de graphique) moins compréhensible et intuitif que celui de <em>ggplot2</em> lorsque vient le temps d’améliorer l’esthétisme des graphiques. De plus, sa plus faible popularité fait en sorte que ce <em>package</em> demeure moins développé par la communauté de codeurs de R que ne l’est <em>ggplot2</em>. Nous examinons plus en détail la grammaire de graphique de ce dernier <em>package</em> ainsi que ses avantages et inconvénients dans la prochaine section <span class="citation" data-cites="kabacoff22 wickham09">(<a href="references.html#ref-kabacoff22" role="doc-biblioref"><strong>kabacoff22?</strong></a> et 390; <a href="references.html#ref-wickham09" role="doc-biblioref"><strong>wickham09?</strong></a>)</span>.</p>
</section><section id="avantages-et-inconvénients-de-ggplot2" class="level4" data-number="6.2.1.3"><h4 data-number="6.2.1.3" class="anchored" data-anchor-id="avantages-et-inconvénients-de-ggplot2">
<span class="header-section-number">6.2.1.3</span> Avantages et inconvénients de ggplot2</h4>
<p>Développé principalement par Hadley Wickham, <em>ggplot2</em> est un <em>package R</em> faisant partie de la collection de <em>packages</em> de <em>tidyverse</em>. Ainsi, <em>Ggplot2</em> peut être utilisé avec les autres <em>packages</em> centraux de <em>tidyverse</em> ce qui limite de potentiels conflits entre les fonctions de <em>packages</em> qui puissent être incompatibles avec <em>ggplot2</em>. Par exemple, le <em>package dplyr</em> de <em>tidyverse</em> est très utile pour analyser, organiser et préparer vos données à visualiser avec <em>ggplot2</em> <span class="citation" data-cites="wickham_etal19 wickham_etal23">(<a href="references.html#ref-wickham_etal19" role="doc-biblioref"><strong>wickham_etal19?</strong></a>; <a href="references.html#ref-wickham_etal23" role="doc-biblioref"><strong>wickham_etal23?</strong></a>)</span>.</p>
<p>Le principal avantage de <em>ggplot2</em> reste sa grammaire qui permet à l’utilisateur de rendre ses graphiques beaucoup plus visuellement attrayants en facilitant la personnalisation esthétique. Ceci permet de pousser l’esthétisme de vos graphiques à un très haut niveau par rapport aux autres <em>packages</em> de visualisation graphique disponibles en R. Les graphiques <em>ggplot2</em> se construisent couche par couche, soit par l’ajout des différents éléments du graphique au fur et à mesure dans le code du graphique à construire.</p>
<p>La première couche des graphiques <em>ggplot</em> est généralement celle des données et des variables à visualiser. Elle contient plusieurs éléments fondamentaux qui sont essentiels à chaque graphique. Le premier élément est la spécification de l’utilisation du <em>package ggplot2</em> qui se fait simplement en appelant la fonction <em>ggplot2()</em>. Dans cette fonction, il faut ensuite mentionner quelle est la base de données (data=<nom de="" la="" base="" donn="">) ainsi que la fonction qui sera utilisée pour positionner les données (aes(<positionnement des="" donn="">). Le positionnement le plus courant est de positionner des données <em>x</em> par rapport à des données <em>y</em>, ce qui se fait de la sorte: aes(x=<nom de="" la="" colonne="" x="">, y=<nom de="" la="" colonne="" y="">).</nom></nom></positionnement></nom></p>
<p>La deuxième couche des graphiques <em>ggplot2</em> est celle du <em>geom</em>, qui spécifie le type de graphique souhaité. Les types de graphiques les plus couramment utilisés avec <em>ggplot2</em> sont les nuages de points (<em>geom_point()</em>), les diagrammes de lignes de tendances ou de séries chronologiques (<em>geom_line()</em>), les courbes de densité (<em>geom_density()</em>) ainsi que les graphiques à bandes (<em>geom_bar()</em>). Mais les possibilités sont infinies (ou presque!) avec ggplot2 et bien plus de types de graphiques existent.</p>
<p>Les autres couches des graphiques <em>ggplot2</em> dépendent souvent du codeur et des étapes de construction de son graphique<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> <span class="citation" data-cites="wickham09">(<a href="references.html#ref-wickham09" role="doc-biblioref"><strong>wickham09?</strong></a> et 89-93)</span>. Le reste de ce chapitre présente la grammaire de <em>ggplot2</em> avec un exemple de construction de graphique à bande présenté couche par couche.</p>
</section></section></section><section id="réflexion-méthodologique" class="level2" data-number="6.3"><h2 data-number="6.3" class="anchored" data-anchor-id="réflexion-méthodologique">
<span class="header-section-number">6.3</span> Réflexion méthodologique</h2>
<section id="comment-utiliser-ggplot2" class="level3" data-number="6.3.1"><h3 data-number="6.3.1" class="anchored" data-anchor-id="comment-utiliser-ggplot2">
<span class="header-section-number">6.3.1</span> Comment utiliser ggplot2</h3>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Première couche de l'exemple de graphique</span></span>
<span><span class="co"># ggplot2 (base de données, variables et geom)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data<span class="op">=</span><span class="va">GraphiqueExemple</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">province</span>, y<span class="op">=</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tel que mentionné dans le dernier paragraphe, la première étape est de spécifier la base de données et les variables qu’on souhaite visualiser. Vous vous souviendrez qu’au début de la section, nous avons mentionné la collection <em>tidyverse</em>, et plus spécifiquement le <em>package dplyr</em> qui y est compris. Ce dernier a été utilisé pour nettoyer/calculer la proportion de répondants par province au préalable, ce qui nous permet de positionner directement la variable <em>prop</em> dans l’axe y.</p>
<!--

Avantages: tidyverse, beauté et possibilités infinies (on peut les animer!!!), beaux résultats même pour les débutants, rapidité pour l'exploration de données, facettes
          - Inconvénients: complexité potentielle, package extérieur, courbe d'apprentissage plus élevée
          
          
Commentaires de Cloé:           
          
- À la suggestion de Cloé: avoir un annexe (cheat sheet) ggplot2 à côté de l'annexe des codes (termes importants, autres..).
      
-->
</section><section id="exemples-et-fonctionnalités" class="level3" data-number="6.3.2"><h3 data-number="6.3.2" class="anchored" data-anchor-id="exemples-et-fonctionnalités">
<span class="header-section-number">6.3.2</span> Exemples et fonctionnalités</h3>
</section></section><section id="trucs-et-astuces" class="level2" data-number="6.4"><h2 data-number="6.4" class="anchored" data-anchor-id="trucs-et-astuces">
<span class="header-section-number">6.4</span> Trucs et astuces</h2>
<!--
### Retour sur la communication des données? À voir. 

La visualisation des données est une étape essentielle de la communication scientifique. Elle permet d'isoler les éléments clés d'une analyse qui mérite notre attention, d'où l'importance de développer cette comptétence. On peut ainsi considérer la visualisation des données comme un mariage entre la science et l'art (Citer Prof. Cooper, ICPSR, 2022). D'une part, il est question de demeurer fidèle aux données et aux mesures des phénomènes observés, tandis que de l'autre part, l'art facilite la communication et la persuasion. 

Quelques principes d'une bonne visualisation : 
- Précise
- Claire/Simple
- Intuitive
- Réductrice
- Révélatrice
- Convaincante

-->
</section><section id="pour-aller-plus-loin" class="level2" data-number="6.5"><h2 data-number="6.5" class="anchored" data-anchor-id="pour-aller-plus-loin">
<span class="header-section-number">6.5</span> Pour aller plus loin</h2>

<!--
### La visualisation interactive des données

Si jusqu'à présent la visualisation des données a été présentée comme une étape permettant de présenter les résultats de recherches, il est également possible de considérer la visualisation comme une utile au processus d'exploration des données comportants de nombreuses dimensions (autres façons de le dire peut-être?). En effet, les formes de visualisations dites interactives permettant d'explorer et même d'analyser les données à même notre graphique ou notre tableau. Cela contribue à mieux comprendre la structures des données, à inspecter plus rapidement ces dernières et même susciter des questions de recherches peut-être omises autrement (citer Sievert, 2020). 

- ggplotly et plotly
- Tableaux interactifs? fonctions kable() et kableExtra du package knitr
- Shiny Apps

-->
</section><section id="références" class="level2" data-number="6.6"><h2 data-number="6.6" class="anchored" data-anchor-id="références">
<span class="header-section-number">6.6</span> Références</h2>
<!--

## Réflexion théorique

### Les options disponibles

Lorsque vous souhaitez créer des graphiques en R, les options abondent. De multiples *packages* ont été développés dans le but de visualiser des données. Heureusement, les choix diminuent lorsque l'on regarde ce qui est le plus utilisé dans la communauté. L'objectif n'est pas simplement de présenter les *packages* les plus courrants parce qu'ils sont les plus communs. Les *packages* les plus utilisés représentent des outils qui ont été grandement vérifiés et améliorés par la communauté en ligne, dont la documentation est abondante et pour lesquels les ressources d'aide en ligne sont innombrables. 

Trois options vous sont présentées: Base R, Lattice et ggplot2. Les avantages et inconvénients respectifs de ces trois approches pour la création de graphiques sont explicités dans les sections suivantes.

#### Avantages et inconvénients de Base R

Base R est le logiciel de base qui contient le langage de programmation R. Lorsque R Studio est installé sur un ordinateur, il est toujours possible d'utiliser le langage de base de R pour coder sans même avoir à installer des *packages*. Base R permet donc de produire des graphiques rapidement sans avoir à installer quoi que ce soit. 


Pour produire un graphique avec ce langage de base, il suffit de faire appel à la fonction *plot()* dans laquelle il est spécifié un x et y à partir d'une base de données et un graphiques est déjà créé. Les fonctions *barplot(), hist()* ou *boxplot()* ajoutés au graphiques permettent de spécifier le style de visualisation souhaitée.

-->

<!--

## Réflexion théorique


Alors qu'un peu tout peut être fait avec Base R, ce langage demeure élémentaire; il est difficile d'innover dans la visualisation ou même de produire des graphiques moindrement sophistiqués. Base R peut sembler plus simple pour l'exploration de données ou pour produire des graphiques de base rapidement, mais ce langage devient vite complexe.

**Exemple Base R**

#### Avantages et inconvénients de Lattice

Développé par Deepayan Sarkar, Lattice est un système graphique qui implémente spécifiquement l'idée des graphiques à facettes, qui a été initialement développée pour des langages informatique comme *S* et *S-Plus* [sarkar23]. Ce langage vise à améliorer les graphiques de Base R en fournissant de meilleures valeurs par défaut et la possibilité d'afficher facilement des relations multivariées. Le package prend en charge la création de graphiques en treillis (afficher une variable ou la relation entre les variables, conditionné par une ou plusieurs autres variables). 

Pour produire un grpahique de base avec Lattice, le *package lattice* doit préalablement être installé sur l'ordinateur et chargé dans la session d'utilisation. Il suffit ensuite de spécifier un type de graphique, la formule qui lie x et y ainsi que les données qui serviront à produire le graphique (*graph_type(formula, data=)*).

Il est, de manière générale, plus complexe de se familiariser avec ce langage qui est moins instinctif et moins populaire; la communauté en ligne est donc moins développée.

**Exemple Lattice**

#### Avantages et inconvénients de ggplot2

Développé principalement par Hadley Wickham, **ggplot2** est un  *package R* faisant partie de la collection de *packages* de **tidyverse**. L'utilisation de **ggplot2** permet donc une adéquation avec d'autres *packages* centraux au développement de la visualisation des données et des analyses statistiques, comme  **dplyr** [@wickham_etal19]. Lorsque la **tidyverse** est utilisée de l'importation des données à leur visualisation graphique, la cohérence entre les *packages* présente l'avantage d'assurer qu'il n'y a pas de conflits entre les fonctions, et donc, réduit les erreurs introduites potentiellement. 


Avantages: tidyverse, beauté et possibilités infinies (on peut les animer!!!), beaux résultats même pour les débutants, rapidité pour l'exploration de données, facettes
          - Inconvénients: complexité potentielle, package extérieur, courbe d'apprentissage plus élevée


# Plan
- Question: Comment opimiser l'intelligibilité des données?
      - Communication et vulgarisation **Question : Est-ce qu'il nous faut nécessairement une question de recherche dans ce chapitre qui est plus technique**
      
- Réflexion théorique:
      - Différentes options disponibles (base R, lattice et ggplot2)
      - Avantages et inconvénients de ggplot2
          - Avantages: tidyverse, beauté et possibilités infinies (on peut les animer!!!), beaux résultats même pour les débutants, rapidité pour l'exploration de données, facettes
          - Inconvénients: complexité potentielle, package extérieur, Base R est toujours là, courbe d'apprentissage plus élevée **Montrer un exemple de graphique construit layer par layer (couche par couche)**
      - Comparaison
          - Base R: la fonction plot() de base ou avec arguments, les fonctions barplot(), hist(), boxplot(), les grids. Base R peut sembler plus siple pour l'exploration de données, mais de vient vite plus complexe (même pour visualiser avec grid).
          - Lattice: explication du package densityplot(), splom(), xyplot()
- Réflexion méthodologique :
      - Comment utiliser ggplot2:
          - Grammar of graphics: créer toutes sortes de graphiques à partir de quelques composants: data, geom, coordinate system et plot
          - Aesthetic propreties de base: size, color, emplacements de x et y
          - Transformation de la base de données d'origine directement dans le graphique (ex: stat)
      - Exemples et fonctionnalités
          - Graphiques les plus communs avec variables discrètes ou continues
          - Cartes
          - Visualisation de 3 variables
          - Visualisation des marges d'erreur, juste spécifier que l'option est possible
– Trucs et astuces :
      - ggplot2 cheat sheet
      - Pleins d'idées de visualisation en ligne et de codes adaptables disponibles
      - Retour sur la communication des données: choix du graphique en fonction des données et de l'objectif de communication
      
      
      -->


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Université Laval<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Université de Montréal<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Plusieurs options disponibles comme des histogrammes avec la fonction <em>histogram()</em> ou des graphiques de densité avec la fonction <em>densityplot()</em>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Les étapes (couches) d’un graphique <em>ggplot2</em> ne sont pas nécessairement dans le même ordre d’un graphique à un autre.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./chapitre_5.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Les outils de collecte de données</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapitre_7.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Baliser les sciences sociales&nbsp;: langages et pratiques</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Livre-outils</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Ce livre a été écrit avec <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>


</body></html>